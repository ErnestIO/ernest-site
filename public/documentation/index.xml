<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Documentations on ernest.r3labs.io</title>
    <link>/documentation/</link>
    <description>Recent content in Documentations on ernest.r3labs.io</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-EN</language>
    <managingEditor>jason.reid@r3labs.io (Jason Reid)</managingEditor>
    <webMaster>jason.reid@r3labs.io (Jason Reid)</webMaster>
    <copyright>(c) 2016 R3 Labs</copyright>
    <lastBuildDate>Mon, 06 Jun 2016 00:00:00 +0000</lastBuildDate>
    <atom:link href="/documentation/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>CLI Command Reference</title>
      <link>/documentation/cli-cmds/</link>
      <pubDate>Mon, 06 Jun 2016 00:00:00 +0000</pubDate>
      <author>jason.reid@r3labs.io (Jason Reid)</author>
      <guid>/documentation/cli-cmds/</guid>
      <description>

&lt;h1 id=&#34;cli-command-reference&#34;&gt;CLI Command Reference&lt;/h1&gt;

&lt;p&gt;&lt;code&gt;ernest target&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest target - Configure Ernest target instance.

USAGE:
   ernest target &amp;lt;ernest_url&amp;gt;

DESCRIPTION:
   Sets up ernest instance target.

   Example:
    $ ernest target https://myernest.com
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest info&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest info - Display system-wide information.

USAGE:
   ernest info

DESCRIPTION:
   Displays ernest instance information.

   Example:
    $ ernest info
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest login&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest login - Login with your Ernest credentials.

USAGE:
   ernest login [command options]

DESCRIPTION:
   Logs an user into Ernest instance.

   Example:
    $ ernest login

   It can also be used without asking the username and password.

   Example:
    $ ernest login --user &amp;lt;user&amp;gt; --password &amp;lt;password&amp;gt;
  

OPTIONS:
   --user   User credentials
   --password   Password credentials
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest logout&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest logout - Clear local authentication credentials.

USAGE:
   ernest logout

DESCRIPTION:
   Logs out an user from Ernest instance.

   Example:
    $ ernest logout
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest user list&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest user list - List available users.

USAGE:
   ernest user list

DESCRIPTION:
   List available users.

   Example:
    $ ernest user list
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest user create&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest user create - Create a new user.

USAGE:
   ernest user create [command options] &amp;lt;username&amp;gt; &amp;lt;password&amp;gt;

DESCRIPTION:
   Create a new user on the targeted instance of Ernest.

   Example:
    $ ernest user create --user &amp;lt;adminuser&amp;gt; --password &amp;lt;adminpassword&amp;gt; &amp;lt;username&amp;gt; &amp;lt;password&amp;gt;

   You can also add an email to the user with the flag --email

   Example:
    $ ernest user create --user &amp;lt;adminuser&amp;gt; --password &amp;lt;adminpassword&amp;gt; --email username@example.com &amp;lt;username&amp;gt; &amp;lt;password&amp;gt;
  

OPTIONS:
   --user   Admin user credentials
   --password   Admin password credentials
   --email  Email for the user
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest user password&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest user password - Change password of available users.

USAGE:
   ernest user password [command options] &amp;lt;user-id&amp;gt;

DESCRIPTION:
   Change password of available users.

   Example:
    $ ernest user password &amp;lt;user-id&amp;gt;

    or changing a password by being admin:

    $ ernest user password --user &amp;lt;adminuser&amp;gt; --password &amp;lt;adminpassword&amp;gt; &amp;lt;user-id&amp;gt;
  

OPTIONS:
   --user   Admin user credentials
   --password   Admin password credentials
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest user disable&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest user disable - Disable available users.

USAGE:
   ernest user disable [command options] &amp;lt;username&amp;gt;

DESCRIPTION:
   Disable available users.

  Example:
   $ ernest user disable --user &amp;lt;adminuser&amp;gt; --password &amp;lt;adminpassword&amp;gt; &amp;lt;user-id&amp;gt;
 

OPTIONS:
   --user   Admin user credentials
   --password   Admin password credentials
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest group list&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest group list - List available groups.

USAGE:
   ernest group list

DESCRIPTION:
   List available groups.

   Example:
    $ ernest group list
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest datacenter list&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest datacenter list - List available datacenters.

USAGE:
   ernest datacenter list

DESCRIPTION:
   List available datacenters.

   Example:
    $ ernest datacenter list
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest datacenter create&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest datacenter create - Create a new datacenter.

USAGE:
   ernest datacenter create [command options] &amp;lt;datacenter-name&amp;gt; &amp;lt;vcloud-url&amp;gt; &amp;lt;network-name&amp;gt;

DESCRIPTION:
   Create a new datacenter on the targeted instance of Ernest.

   Example:
    $ ernest datacenter create --datacenter-user username --datacenter-password xxxx --datacenter-org MY-ORG-NAME --vse-url http://vse.url mydatacenter https://myernest.com MY-PUBLIC-NETWORK
  

OPTIONS:
   --datacenter-user    User to be configured with the datacenter
   --datacenter-password  Password related with user
   --datacenter-org     vCloud Organization name
   --vse-url      VSE URL
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest service list&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest service list - List available services.

USAGE:
   ernest service list

DESCRIPTION:
   List available services and shows its most relevant information.

   Example:
    $ ernest service list
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest service apply&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest service apply - Builds or changes infrastructure.

USAGE:
   ernest service apply &amp;lt;file.yml&amp;gt;

DESCRIPTION:
   Sends a service YAML description file to Ernest to be executed.
   You must be logged in to execute this command.

   If the file is not provided, ernest.yml will be used by default.

   Example:
    $ ernest apply myservice.yml
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest service destroy&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest service destroy - Destroy a service.

USAGE:
   ernest service destroy [command options] &amp;lt;service_name&amp;gt;

DESCRIPTION:
   Destroys a service by its name.

   Example:
    $ ernest destroy myservice
  

OPTIONS:
   --yes, -y  Force destroy command without asking for permission.
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest service history&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest service history - Shows the history of a service, a list of builds

USAGE:
   ernest service history &amp;lt;service_name&amp;gt;

DESCRIPTION:
   Shows the history of a service, a list of builds and its status and basic information.

   Example:
    $ ernest history myservice
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest service reset&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest service reset - Reset an in progress service.

USAGE:
   ernest service reset &amp;lt;service_name&amp;gt;

DESCRIPTION:
   Reseting a service creation may cause problems, please make sure you know what are you doing.

   Example:
    $ ernest reset myservice
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest service definition&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest service definition - Show the current definition of a service by its name

USAGE:
   ernest service definition [command options] &amp;lt;service_name&amp;gt;

DESCRIPTION:
   Show the current definition of a service by its name getting the definition about the build.

   Example:
    $ ernest service definition myservice
  

OPTIONS:
   --build  Build ID
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;code&gt;ernest service monitor&lt;/code&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;NAME:
   ernest service monitor - Monitor a service.

USAGE:
   ernest service monitor &amp;lt;service_id&amp;gt;

DESCRIPTION:
   Monitors a service while it is being built by its service id.

   Example:
    $ ernest monitor F94034CE-1A57-4A66-AF49-E1E99C5010A2
&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>CLI Guide</title>
      <link>/documentation/cli-guide/</link>
      <pubDate>Mon, 06 Jun 2016 00:00:00 +0000</pubDate>
      <author>jason.reid@r3labs.io (Jason Reid)</author>
      <guid>/documentation/cli-guide/</guid>
      <description>

&lt;h1 id=&#34;using-the-cli&#34;&gt;Using the CLI&lt;/h1&gt;

&lt;h2 id=&#34;connecting-to-ernest&#34;&gt;Connecting to Ernest&lt;/h2&gt;

&lt;p&gt;The first step is to specify the IP address of our Ernest Server:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest target https://&amp;lt;Ernest Server IP&amp;gt;
Target set

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now we should login to Ernest with the built-in admin account:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ernest login
Username: admin
Password: &amp;lt;admin default password&amp;gt;

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;and change the admin password:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest user list
NAME	ID					EMAIL
admin	&amp;lt;User ID&amp;gt;	&amp;lt;User Email&amp;gt;

$ ernest user password &amp;lt;User ID&amp;gt;
New Password: &amp;lt;new admin password&amp;gt;
Repeat new Password: &amp;lt;new admin password&amp;gt;

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;Note when changing a user password you must identify the user by their User ID.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Now we can create a user on Ernest:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest user create --user admin --password &amp;lt;admin password&amp;gt; &amp;lt;username&amp;gt; &amp;lt;password&amp;gt;
SUCCESS: Group &amp;lt;user&amp;gt; created
SUCCESS: User &amp;lt;user&amp;gt; created

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;&lt;em&gt;Note a group is also created with the same name as the user.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Now we can login with our new user:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest logout
Log out succesful.

$ ernest login 
Username: &amp;lt;user&amp;gt;
Password: &amp;lt;password&amp;gt;
Log in succesful.

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We can confirm our Ernest Server IP and user:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest info
Current target : https://&amp;lt;Ernest Server IP&amp;gt;
Current user : &amp;lt;user&amp;gt;

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;datacenters&#34;&gt;Datacenters&lt;/h2&gt;

&lt;p&gt;Ernest uses the concept of a &lt;strong&gt;datacenter&lt;/strong&gt; to specify an infrastructure service provider, the provider API endpoint, credentials to access the provider API, and information specific to certain provider types. An example of creating a datacenter in Ernest for a vCloud Director provider is:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest datacenter create --datacenter-user &amp;lt;vcloud user&amp;gt; --datacenter-password &amp;lt;vcloud password&amp;gt; --datacenter-org &amp;lt;vcloud org&amp;gt; &amp;lt;vcloud datacenter&amp;gt; &amp;lt;vcloud API endpoint&amp;gt; &amp;lt;vcloud external network&amp;gt;

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;services&#34;&gt;Services&lt;/h2&gt;

&lt;h3 id=&#34;what-is-a-service&#34;&gt;What is a Service?&lt;/h3&gt;

&lt;p&gt;With Ernest a &lt;strong&gt;service&lt;/strong&gt; is a collection of networking, virtual machines, and configuration options that collectively define an environment, and also the datacenter where the environment should be built. A service is defined in YAML format, and you can see examples of this in the provider-specific documentation.&lt;/p&gt;

&lt;h3 id=&#34;how-to-create-modify-services&#34;&gt;How to Create/Modify Services&lt;/h3&gt;

&lt;p&gt;Once we have created a datacenter and defined our service in YAML the process of building the service is:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service apply &amp;lt;yaml file&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Once the service is created we can modify it by changing the YAML and then re-applying it. Ernest will calculate the differences and apply only those changes necessary to transition the service from the current state to the requested state.&lt;/p&gt;

&lt;p&gt;Finally you can also destroy services if needed:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service destroy &amp;lt;service name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;view-service-state-and-history&#34;&gt;View Service State and History&lt;/h3&gt;

&lt;p&gt;Ernest stores the state of each service, as well as all historical states. You can list the available service with:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service list
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For a given service you can see the history of all builds for that service:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service history &amp;lt;service name&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We can view the YAML for a specific build by:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ernest service definition &amp;lt;service name&amp;gt; --build &amp;lt;build id&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;next-steps&#34;&gt;Next Steps&lt;/h2&gt;

&lt;p&gt;See the &lt;a href=&#34;/documentation/cli-cmds/&#34;&gt;reference guide&lt;/a&gt; for a complete list of the commands available for the CLI.&lt;/p&gt;

&lt;p&gt;See the provider-specific documentation for examples of how to use Ernest:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;/documentation/vcloud-into/&#34;&gt;vCloud Director&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Introduction</title>
      <link>/documentation/vcloud-intro/</link>
      <pubDate>Mon, 06 Jun 2016 00:00:00 +0000</pubDate>
      <author>jason.reid@r3labs.io (Jason Reid)</author>
      <guid>/documentation/vcloud-intro/</guid>
      <description>

&lt;h1 id=&#34;vcloud-director&#34;&gt;vCloud Director&lt;/h1&gt;

&lt;p&gt;&lt;a href=&#34;https://www.vmware.com/products/vcloud-director/&#34; target=&#34;_blank&#34;&gt;vCloud Director (vCD)&lt;/a&gt; is cloud management tool from VMWare that acts as an overlay on top of vSphere, providing users with a self-service GUI and API. vCloud Director enables service providers to offer Infrastructure as a Service to their customers by providing users with direct control of virtual machine provisioning, and some aspects of networking.&lt;/p&gt;

&lt;h2 id=&#34;network-limitations&#34;&gt;Network Limitations&lt;/h2&gt;

&lt;p&gt;vCD most network functionality is delivered by the VMWare vShield Edge (vSE) virtual appliance. Unfortunately certain key network operations can only be performed by the service provider and are not available to users. The include:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;deploying a vSE&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;connecting a vSE to an external network&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;sub-allocating external IP addresses to a vSE&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;All other common network operations are accesible to users, however many of them are limited to users with the &lt;a href=&#34;https://pubs.vmware.com/vca/index.jsp?topic=%2Fcom.vmware.vcloud.api.doc_56%2FGUID-BC504F6B-3D38-4F25-AACF-ED584063754F.html&#34; target=&#34;_blank&#34;&gt;Organization Administrator&lt;/a&gt; role assigned to them.&lt;/p&gt;

&lt;h2 id=&#34;supported-configurations&#34;&gt;Supported Configurations&lt;/h2&gt;

&lt;p&gt;Due to the network limitations Ernest supports 2 different options for vCloud Director:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;normal&lt;/strong&gt; (your service provider has not deployed the VSE Creator Service)&lt;/p&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;enhanced&lt;/strong&gt; (your service provider has deployed the VSE Creator Service)&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;small&gt;&lt;em&gt;The VSE Creator Service is an optional service that can give users the ability to create their own vSE and assign an IP to it. The VSE Creator Service is installed and operated by the service provider.&lt;/em&gt;&lt;/small&gt;&lt;/p&gt;

&lt;p&gt;You can see more information about each option by reviewing the examples of &lt;a href=&#34;/documentation/vcloud-normal/&#34;&gt;normal&lt;/a&gt; and &lt;a href=&#34;/documentation/vcloud-enhanced/&#34;&gt;enhanced&lt;/a&gt; configurations.&lt;/p&gt;

&lt;p&gt;You can also find a reference YAML for vCloud Director &lt;a href=&#34;/documentation/vcloud-yaml/&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Overview</title>
      <link>/documentation/</link>
      <pubDate>Mon, 06 Jun 2016 00:00:00 +0000</pubDate>
      <author>jason.reid@r3labs.io (Jason Reid)</author>
      <guid>/documentation/</guid>
      <description>

&lt;h1 id=&#34;overview-of-ernest&#34;&gt;Overview of Ernest&lt;/h1&gt;

&lt;p&gt;Ernest is an application and infrastructure orchestration and automation engine. Ernest takes the complexity and people out of DevOps, simplifying the process of creating and managing even the most complex environments.&lt;/p&gt;

&lt;p&gt;By delivering everything a development team requires to be able to deploy code and manage its lifecycle Ernest de-risks and accelerates the application development/deployment process, helping developers to deliver value back to the business faster and providing increased business agility&lt;/p&gt;

&lt;p&gt;Ernest has been engineered for flexibility, allowing you to design your environment the way you want. You pick the technologies, the cloud and the architecture then overlay your compliance and governance requirements.&lt;/p&gt;

&lt;p&gt;The Cloud is about freedom of choice and mobility. With Ernest you can easily deploy your environment onto the cloud or infrastructure of your choice and the redeploy it to an alternative cloud as business requirements demand.&lt;/p&gt;

&lt;p&gt;Because Ernest is about developing and then using software reliably and reproducibly it ensures consistency and agility throughout the application lifecycle. Ernest brings the same version control, testing and configuration management tooling you use elsewhere in your development process to your platform; allowing you to utilise version controlled, tested, automated deployments of your environment from the development stage, through testing, to production.&lt;/p&gt;

&lt;p&gt;Ernest key features include;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;A Continuous Delivery pipeline for Infrastructure as Code&lt;/li&gt;
&lt;li&gt;An orchestration tool for any configuration manager and any cloud&lt;/li&gt;
&lt;li&gt;Fully version controlled&lt;/li&gt;
&lt;li&gt;Fully automated&lt;/li&gt;
&lt;li&gt;Works with any technology stack&lt;/li&gt;
&lt;li&gt;Able to manage the full application life cycle&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Ernest is built around the idea that DevOps is not a job title, but a methodology, one which Ernest has enshrined in code. Ernest enables digital and SaaS transformation, while removing the complexity of DevOps by delivering it as-a-Service.&lt;/p&gt;

&lt;h2 id=&#34;next-steps&#34;&gt;Next Steps&lt;/h2&gt;

&lt;p&gt;Follow the instructions &lt;a href=&#34;/download/&#34;&gt;here&lt;/a&gt; to get Ernest and the Ernest CLI. Once we have done that we can &lt;a href=&#34;/documentation/cli-guide/&#34;&gt;start working with them&lt;/a&gt;.&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>vCloud Enhanced Examples</title>
      <link>/documentation/vcloud-enhanced-examples/</link>
      <pubDate>Mon, 06 Jun 2016 00:00:00 +0000</pubDate>
      <author>jason.reid@r3labs.io (Jason Reid)</author>
      <guid>/documentation/vcloud-enhanced-examples/</guid>
      <description>

&lt;h1 id=&#34;vcloud-director-examples&#34;&gt;vCloud Director Examples&lt;/h1&gt;

&lt;h2 id=&#34;normal-vse-creator-service-is-not-available&#34;&gt;Normal (VSE Creator Service is not available)&lt;/h2&gt;

&lt;p&gt;Before we get started we will need the following information:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Ernest IP address (31.210.241.221)&lt;/li&gt;
&lt;li&gt;Ernest username/password (user1/xxxxxx)&lt;/li&gt;
&lt;li&gt;vCloud URL (myvdc.carrenza.net)&lt;/li&gt;
&lt;li&gt;vCloud organisation (r3labs-development)&lt;/li&gt;
&lt;li&gt;vCloud datacenter (r3-jreid2)&lt;/li&gt;
&lt;li&gt;vCloud network (DVS-VCD-EXT-665)&lt;/li&gt;
&lt;li&gt;vCloud username/password (jreid/xxxxxx)&lt;/li&gt;
&lt;li&gt;vCloud router name (test1)&lt;/li&gt;
&lt;li&gt;vCloud sub-allocated IP (195.3.186.42)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;The values in brackets are what we will use for this example. Your service provider can provide you with this information.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;The first step is to set the IP address of Ernest:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest target https://31.210.241.221
Target set

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Next we login to Ernest:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest login
Username: user1
Password: ******
Log in succesful.

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Once we have logged in to Ernest we can setup the vCloud datacenter and credentials that Ernest will use to create our infrastructure:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest datacenter create --datacenter-user jreid --datacenter-password xxxxxx --datacenter-org r3labs-development r3-jreid2 https://myvdc.carrenza.net DVS-VCD-EXT-665
SUCCESS: Datacenter r3-jreid2 created

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now that we have our datacenter created in Ernest we can start building stuff. Below we will show examples for:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;creating infrastructure only&lt;/li&gt;
&lt;li&gt;creating infrastructure and configuring the servers&lt;/li&gt;
&lt;li&gt;creating the servers only&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;infrastructure-only&#34;&gt;Infrastructure Only&lt;/h3&gt;

&lt;p&gt;For our example we will deploy a single Ubuntu server from a catalog image (image: r3/ubuntu-1404) and configure our networking to permit SSH access to the server. Our YAML for this example is:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;---
name: demo1
datacenter: r3-jreid2
bootstrapping: none
service_ip: 195.3.186.42

routers: 
  - name: test1
    rules:
    - name: in_out_any
      source: internal
      from_port: any
      destination: external
      to_port: any
      protocol: any
      action: allow

    - name: out_in_22
      source: any
      from_port: any
      destination: internal
      to_port: &#39;22&#39;
      protocol: tcp
      action: allow

    networks:
      - name: web
        subnet: 10.1.0.0/24
        dns:
          - 8.8.8.8
          - 8.8.4.4

    port_forwarding:
      - source: 195.3.186.42
        from_port: &#39;22&#39;
        to_port: &#39;22&#39;
        destination: 10.1.0.11

instances:
  - name: web
    image: r3/ubuntu-1404
    cpus: 1
    memory: 1GB
    count: 1
    networks:
      name: web
      start_ip: 10.1.0.11

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now that we have defined our infrastructure we are ready to apply our definition:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service apply demo1.yml
Environment creation requested
Ernest will show you all output from your requested service creation
You can cancel at any moment with Ctrl+C, even the service is still being created, you won&#39;t have any output
Starting environment creation

Creating routers:
  195.3.186.42
Routers successfully created

Creating networks:
  - 10.1.0.0/24
Networks successfully created

Creating instances:
   - r3-jreid2-demo1-web-1
Instances successfully created

Updating instances:
   - r3-jreid2-demo1-web-1
Instances successfully updated

Setting up firewalls:
Firewalls Created

Configuring nats
Nats Created

SUCCESS: rules successfully applied
Your environment endpoint is: 195.3.186.42

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Congratulations! You have built your first infrastructure with Ernest. You can now SSH to the server on IP 195.3.186.42 to install and configure your software.&lt;/p&gt;

&lt;p&gt;If you wish to change the infrastructure update your YAML to show how you want the infrastructure to look, then re-apply the YAML. Ernest will make the appropriate changes to the infrastructure.&lt;/p&gt;

&lt;p&gt;For example if we increase the &amp;lsquo;web&amp;rsquo; instance count from 1 to 2 and re-apply the YAML a new server is created:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service apply demo1.yml 
Environment creation requested
Ernest will show you all output from your requested service creation
You can cancel at any moment with Ctrl+C, even the service is still being created, you won&#39;t have any output
Starting environment creation

Creating instances:
   - r3-jreid2-demo1-web-2
Instances successfully created

Updating instances:
   - r3-jreid2-demo1-web-2
Instances successfully updated

SUCCESS: rules successfully applied
Your environment endpoint is: 195.3.186.42

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We can list the services we created:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service list
NAME  UPDATED       STATUS  ENDPOINT
demo1 2016-05-29 14:52:13 +0100 BST done  195.3.186.42

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For a given service we can see the history:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service history demo1
NAME  BUILD ID                UPDATED       STATUS
demo1 488249c2-63c2-484e-b6e0-c690ba859dab-8c22343f8f9d3dfb68e41cc033e7b492 2016-05-29 14:52:13 +0100 BST done
demo1 6799e858-0484-42cb-bbb1-c1bc5f61e500-8c22343f8f9d3dfb68e41cc033e7b492 2016-05-29 14:39:56 +0100 BST done

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For a given service and build ID we can see the definition we applied:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service definition demo1 --build 488249c2-63c2-484e-b6e0-c690ba859dab-8c22343f8f9d3dfb68e41cc033e7b492
---
name: demo1
datacenter: r3-jreid2
bootstrapping: none
service_ip: 195.3.186.42

routers: 
  - name: test1
    rules:
    - name: in_out_any
      source: internal
      from_port: any
      destination: external
      to_port: any
      protocol: any
      action: allow

    - name: out_in_22
      source: any
      from_port: any
      destination: internal
      to_port: &#39;22&#39;
      protocol: tcp
      action: allow

    networks:
      - name: web
        subnet: 10.1.0.0/24
        dns:
          - 8.8.8.8
          - 8.8.4.4

    port_forwarding:
      - source: 195.3.186.42
        from_port: &#39;22&#39;
        to_port: &#39;22&#39;
        destination: 10.1.0.11

instances:
  - name: web
    image: r3/ubuntu-1404
    cpus: 1
    memory: 1GB
    count: 2
    networks:
      name: web
      start_ip: 10.1.0.11

&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;infrastructure-and-server-configuration&#34;&gt;Infrastructure and Server Configuration&lt;/h3&gt;

&lt;p&gt;In the above example the task of installing and configuring software was left to the user to do. In this example we will bootstrap the servers and install our software directly from the YAML.&lt;/p&gt;

&lt;p&gt;The new YAML is shown here:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;---
name: demo2
datacenter: r3-jreid2
bootstrapping: salt
service_ip: 195.3.186.42
ernest_ip:
  - 31.210.241.221
  - 31.210.240.161

routers: 
  - name: test1
    rules:
    - name: in_out_any
      source: internal
      from_port: any
      destination: external
      to_port: any
      protocol: any
      action: allow

    - name: out_in_80
      source: any
      from_port: any
      destination: internal
      to_port: &#39;80&#39;
      protocol: tcp
      action: allow

    networks:
      - name: web
        subnet: 10.1.0.0/24
        dns:
          - 8.8.8.8
          - 8.8.4.4
          
    port_forwarding:
      - source: 195.3.186.42
        from_port: &#39;80&#39;
        to_port: &#39;80&#39;
        destination: 10.1.0.11

instances:
  - name: web
    image: r3/ubuntu-1404
    cpus: 1
    memory: 1GB
    count: 1
    networks:
      name: web
      start_ip: 10.1.0.11
    provisioner:
      - exec:
        - &#39;sudo apt-get update&#39;
        - &#39;sudo apt-get install apache2 -y&#39;

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The first thing to notice is that we have changed &amp;lsquo;bootstrapping&amp;rsquo; from &amp;lsquo;none&amp;rsquo; to &amp;lsquo;salt&amp;rsquo;. This will result in Ernest deploying a SALT instance that we can use to manage our environment. Note that the &amp;lsquo;bootstrapping&amp;rsquo; option must be specified when an environment is created and cannot be changed for that environment.&lt;/p&gt;

&lt;p&gt;The next thing we have changed are the firewall and port-forwarding configuration. We have removed the sections needed for SSH access to the server since we are now able to run commands directly from the YAML.&lt;/p&gt;

&lt;p&gt;Finally, we have added a provisioner section to the instance that will install the Apache HTTP Server.&lt;/p&gt;

&lt;p&gt;Now that we have defined our platform we are ready to create it:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service apply demo2.yml
Environment creation requested
Ernest will show you all output from your requested service creation
You can cancel at any moment with Ctrl+C, even the service is still being created, you won&#39;t have any output
Starting environment creation

Creating routers:
  195.3.186.42
Routers successfully created

Creating networks:
  - 10.254.254.0/24
  - 10.1.0.0/24
Networks successfully created

Creating instances:
   - r3-jreid2-demo2-salt-master
   - r3-jreid2-demo2-web-1
Instances successfully created

Updating instances:
   - r3-jreid2-demo2-salt-master
   - r3-jreid2-demo2-web-1
Instances successfully updated

Setting up firewalls:
Firewalls Created

Configuring nats
Nats Created

Bootstrapping
Instances bootstrapped

Running executions
Executions ran

SUCCESS: rules successfully applied
Your environment endpoint is: 195.3.186.42

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Notice that Ernest has automatically created a SALT instance for us on network 10.254.254.0/24. It has also trigged the bootstrapping process that installs the SALT minion on each of our servers, and then run the commands we specified in the provisioner section of each instance defined in the YAML.&lt;/p&gt;

&lt;p&gt;You should be able to browse to &lt;a href=&#34;http://195.3.186.42&#34; target=&#34;_blank&#34;&gt;http://195.3.186.42&lt;/a&gt;. Congratulations!&lt;/p&gt;

&lt;p&gt;If you wish to change the platform update your YAML to show how you want the platform to look, then re-apply the YAML. Ernest will make the appropriate changes to the platform.&lt;/p&gt;

&lt;h3 id=&#34;servers-only&#34;&gt;Servers Only&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;---
name: demo3
datacenter: r3-jreid2

instances:
  - name: web
    image: r3/ubuntu-1404
    cpus: 1
    memory: 1GB
    count: 1
    networks:
      name: r3-jreid2-test3-web
      start_ip: 10.1.0.11

&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service apply demo3.yml
Environment creation requested
Ernest will show you all output from your requested service creation
You can cancel at any moment with Ctrl+C, even the service is still being created, you won&#39;t have any output
Starting environment creation

Creating instances:
   - r3-jreid2-demo3-web-1
Instances successfully created

Updating instances:
   - r3-jreid2-demo3-web-1
Instances successfully updated

SUCCESS: rules successfully applied
Your environment endpoint is: 

&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;enhanced-vse-creator-service-is-available&#34;&gt;Enhanced (VSE Creator Service is available)&lt;/h2&gt;

&lt;h3 id=&#34;infrastructure-only-1&#34;&gt;Infrastructure Only&lt;/h3&gt;

&lt;h3 id=&#34;bootstrapped&#34;&gt;Bootstrapped&lt;/h3&gt;
</description>
    </item>
    
    <item>
      <title>vCloud Normal Examples</title>
      <link>/documentation/vcloud-normal-examples/</link>
      <pubDate>Mon, 06 Jun 2016 00:00:00 +0000</pubDate>
      <author>jason.reid@r3labs.io (Jason Reid)</author>
      <guid>/documentation/vcloud-normal-examples/</guid>
      <description>

&lt;h1 id=&#34;vcloud-director-normal-examples&#34;&gt;vCloud Director Normal Examples&lt;/h1&gt;

&lt;p&gt;If you would like to try Ernest but do not have access to vCloud you can request a vcloud account &lt;a href=&#34;/vcloud-account&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Before we get started we will need the following information:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Ernest IP address (31.210.241.221)&lt;/li&gt;
&lt;li&gt;Ernest username/password (user1/xxxxxx)&lt;/li&gt;
&lt;li&gt;vCloud URL (myvdc.carrenza.net)&lt;/li&gt;
&lt;li&gt;vCloud organisation (r3labs-development)&lt;/li&gt;
&lt;li&gt;vCloud datacenter (r3-jreid2)&lt;/li&gt;
&lt;li&gt;vCloud network (DVS-VCD-EXT-665)&lt;/li&gt;
&lt;li&gt;vCloud username/password (jreid/xxxxxx)&lt;/li&gt;
&lt;li&gt;vCloud router name (test1)&lt;/li&gt;
&lt;li&gt;vCloud sub-allocated IP (195.3.186.42)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;em&gt;The values in brackets are what we will use for this example. Your service provider can provide you with the vCloud information.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;The first step is to set the IP address of Ernest:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest target https://31.210.241.221
Target set

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Next we login to Ernest:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest login
Username: user1
Password: ******
Log in succesful.

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Once we have logged in to Ernest we can setup the vCloud datacenter and credentials that Ernest will use to create our infrastructure:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest datacenter create --datacenter-user jreid --datacenter-password xxxxxx --datacenter-org r3labs-development r3-jreid2 https://myvdc.carrenza.net DVS-VCD-EXT-665
SUCCESS: Datacenter r3-jreid2 created

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now that we have our datacenter created in Ernest we can start building stuff. Below we will show examples for:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;creating infrastructure only&lt;/li&gt;
&lt;li&gt;creating infrastructure and configuring the servers&lt;/li&gt;
&lt;li&gt;creating the servers only&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;infrastructure-only&#34;&gt;Infrastructure Only&lt;/h3&gt;

&lt;p&gt;For our example we will deploy a single Ubuntu server from a catalog image (image: r3/ubuntu-1404) and configure our networking to permit SSH access to the server. Our YAML for this example is:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;---
name: demo1
datacenter: r3-jreid2
bootstrapping: none
service_ip: 195.3.186.42

routers: 
  - name: test1
    rules:
    - name: in_out_any
      source: internal
      from_port: any
      destination: external
      to_port: any
      protocol: any
      action: allow

    - name: out_in_22
      source: any
      from_port: any
      destination: internal
      to_port: &#39;22&#39;
      protocol: tcp
      action: allow

    networks:
      - name: web
        subnet: 10.1.0.0/24
        dns:
          - 8.8.8.8
          - 8.8.4.4

    port_forwarding:
      - source: 195.3.186.42
        from_port: &#39;22&#39;
        to_port: &#39;22&#39;
        destination: 10.1.0.11

instances:
  - name: web
    image: r3/ubuntu-1404
    cpus: 1
    memory: 1GB
    count: 1
    networks:
      name: web
      start_ip: 10.1.0.11

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now that we have defined our infrastructure we are ready to apply our definition:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service apply demo1.yml
Environment creation requested
Ernest will show you all output from your requested service creation
You can cancel at any moment with Ctrl+C, even the service is still being created, you won&#39;t have any output
Starting environment creation

Creating routers:
  195.3.186.42
Routers successfully created

Creating networks:
  - 10.1.0.0/24
Networks successfully created

Creating instances:
   - r3-jreid2-demo1-web-1
Instances successfully created

Updating instances:
   - r3-jreid2-demo1-web-1
Instances successfully updated

Setting up firewalls:
Firewalls Created

Configuring nats
Nats Created

SUCCESS: rules successfully applied
Your environment endpoint is: 195.3.186.42

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Congratulations! You have built your first infrastructure with Ernest. You can now SSH to the server on IP 195.3.186.42 to install and configure your software.&lt;/p&gt;

&lt;p&gt;If you wish to change the infrastructure update your YAML to show how you want the infrastructure to look, then re-apply the YAML. Ernest will make the appropriate changes to the infrastructure.&lt;/p&gt;

&lt;p&gt;For example if we increase the &amp;lsquo;web&amp;rsquo; instance count from 1 to 2 and re-apply the YAML a new server is created:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service apply demo1.yml 
Environment creation requested
Ernest will show you all output from your requested service creation
You can cancel at any moment with Ctrl+C, even the service is still being created, you won&#39;t have any output
Starting environment creation

Creating instances:
   - r3-jreid2-demo1-web-2
Instances successfully created

Updating instances:
   - r3-jreid2-demo1-web-2
Instances successfully updated

SUCCESS: rules successfully applied
Your environment endpoint is: 195.3.186.42

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We can list the services we created:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service list
NAME  UPDATED       STATUS  ENDPOINT
demo1 2016-05-29 14:52:13 +0100 BST done  195.3.186.42

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For a given service we can see the history:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service history demo1
NAME  BUILD ID                UPDATED       STATUS
demo1 488249c2-63c2-484e-b6e0-c690ba859dab-8c22343f8f9d3dfb68e41cc033e7b492 2016-05-29 14:52:13 +0100 BST done
demo1 6799e858-0484-42cb-bbb1-c1bc5f61e500-8c22343f8f9d3dfb68e41cc033e7b492 2016-05-29 14:39:56 +0100 BST done

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;For a given service and build ID we can see the definition we applied:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service definition demo1 --build 488249c2-63c2-484e-b6e0-c690ba859dab-8c22343f8f9d3dfb68e41cc033e7b492
---
name: demo1
datacenter: r3-jreid2
bootstrapping: none
service_ip: 195.3.186.42

routers: 
  - name: test1
    rules:
    - name: in_out_any
      source: internal
      from_port: any
      destination: external
      to_port: any
      protocol: any
      action: allow

    - name: out_in_22
      source: any
      from_port: any
      destination: internal
      to_port: &#39;22&#39;
      protocol: tcp
      action: allow

    networks:
      - name: web
        subnet: 10.1.0.0/24
        dns:
          - 8.8.8.8
          - 8.8.4.4

    port_forwarding:
      - source: 195.3.186.42
        from_port: &#39;22&#39;
        to_port: &#39;22&#39;
        destination: 10.1.0.11

instances:
  - name: web
    image: r3/ubuntu-1404
    cpus: 1
    memory: 1GB
    count: 2
    networks:
      name: web
      start_ip: 10.1.0.11

&lt;/code&gt;&lt;/pre&gt;

&lt;h3 id=&#34;infrastructure-and-server-configuration&#34;&gt;Infrastructure and Server Configuration&lt;/h3&gt;

&lt;p&gt;In the above example the task of installing and configuring software was left to the user to do. In this example we will bootstrap the servers and install our software directly from the YAML.&lt;/p&gt;

&lt;p&gt;The new YAML is shown here:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;---
name: demo2
datacenter: r3-jreid2
bootstrapping: salt
service_ip: 195.3.186.42
ernest_ip:
  - 31.210.241.221
  - 31.210.240.161

routers: 
  - name: test1
    rules:
    - name: in_out_any
      source: internal
      from_port: any
      destination: external
      to_port: any
      protocol: any
      action: allow

    - name: out_in_80
      source: any
      from_port: any
      destination: internal
      to_port: &#39;80&#39;
      protocol: tcp
      action: allow

    networks:
      - name: web
        subnet: 10.1.0.0/24
        dns:
          - 8.8.8.8
          - 8.8.4.4
          
    port_forwarding:
      - source: 195.3.186.42
        from_port: &#39;80&#39;
        to_port: &#39;80&#39;
        destination: 10.1.0.11

instances:
  - name: web
    image: r3/ubuntu-1404
    cpus: 1
    memory: 1GB
    count: 1
    networks:
      name: web
      start_ip: 10.1.0.11
    provisioner:
      - exec:
        - &#39;sudo apt-get update&#39;
        - &#39;sudo apt-get install apache2 -y&#39;

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The first thing to notice is that we have changed &amp;lsquo;bootstrapping&amp;rsquo; from &amp;lsquo;none&amp;rsquo; to &amp;lsquo;salt&amp;rsquo;. This will result in Ernest deploying a SALT instance that we can use to manage our environment. Note that the &amp;lsquo;bootstrapping&amp;rsquo; option must be specified when an environment is created and cannot be changed for that environment.&lt;/p&gt;

&lt;p&gt;The next thing we have changed are the firewall and port-forwarding configuration. We have removed the sections needed for SSH access to the server since we are now able to run commands directly from the YAML.&lt;/p&gt;

&lt;p&gt;Finally, we have added a provisioner section to the instance that will install the Apache HTTP Server.&lt;/p&gt;

&lt;p&gt;Now that we have defined our platform we are ready to create it:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service apply demo2.yml
Environment creation requested
Ernest will show you all output from your requested service creation
You can cancel at any moment with Ctrl+C, even the service is still being created, you won&#39;t have any output
Starting environment creation

Creating routers:
  195.3.186.42
Routers successfully created

Creating networks:
  - 10.254.254.0/24
  - 10.1.0.0/24
Networks successfully created

Creating instances:
   - r3-jreid2-demo2-salt-master
   - r3-jreid2-demo2-web-1
Instances successfully created

Updating instances:
   - r3-jreid2-demo2-salt-master
   - r3-jreid2-demo2-web-1
Instances successfully updated

Setting up firewalls:
Firewalls Created

Configuring nats
Nats Created

Bootstrapping
Instances bootstrapped

Running executions
Executions ran

SUCCESS: rules successfully applied
Your environment endpoint is: 195.3.186.42

&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Notice that Ernest has automatically created a SALT instance for us on network 10.254.254.0/24. It has also trigged the bootstrapping process that installs the SALT minion on each of our servers, and then run the commands we specified in the provisioner section of each instance defined in the YAML.&lt;/p&gt;

&lt;p&gt;You should be able to browse to &lt;a href=&#34;http://195.3.186.42&#34; target=&#34;_blank&#34;&gt;http://195.3.186.42&lt;/a&gt;. Congratulations!&lt;/p&gt;

&lt;p&gt;If you wish to change the platform update your YAML to show how you want the platform to look, then re-apply the YAML. Ernest will make the appropriate changes to the platform.&lt;/p&gt;

&lt;h3 id=&#34;servers-only&#34;&gt;Servers Only&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;---
name: demo3
datacenter: r3-jreid2

instances:
  - name: web
    image: r3/ubuntu-1404
    cpus: 1
    memory: 1GB
    count: 1
    networks:
      name: r3-jreid2-test3-web
      start_ip: 10.1.0.11

&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code&gt;$ ernest service apply demo3.yml
Environment creation requested
Ernest will show you all output from your requested service creation
You can cancel at any moment with Ctrl+C, even the service is still being created, you won&#39;t have any output
Starting environment creation

Creating instances:
   - r3-jreid2-demo3-web-1
Instances successfully created

Updating instances:
   - r3-jreid2-demo3-web-1
Instances successfully updated

SUCCESS: rules successfully applied
Your environment endpoint is: 

&lt;/code&gt;&lt;/pre&gt;
</description>
    </item>
    
    <item>
      <title>vCloud YAML Reference</title>
      <link>/documentation/vcloud-yaml/</link>
      <pubDate>Mon, 06 Jun 2016 00:00:00 +0000</pubDate>
      <author>jason.reid@r3labs.io (Jason Reid)</author>
      <guid>/documentation/vcloud-yaml/</guid>
      <description>

&lt;h1 id=&#34;vcloud-director-yaml-reference&#34;&gt;vCloud Director YAML Reference&lt;/h1&gt;

&lt;p&gt;Environments built and managed with Ernest are defined in YAML format.&lt;/p&gt;

&lt;h2 id=&#34;example&#34;&gt;Example&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;---
name: demo
datacenter: r3-jreid2
bootstrapping: salt
service_ip: 195.3.186.44
ernest_ip:
  - 31.210.240.161

routers: 
  - name: demo
    rules:
    - name: in_out_any
      source: internal
      from_port: any
      destination: external
      to_port: any
      protocol: any
      action: allow

    - name: out_in_80
      source: any
      from_port: any
      destination: internal
      to_port: &#39;80&#39;
      protocol: tcp
      action: allow

    networks:
      - name: web
        subnet: 10.1.0.0/24
        dns:
          - 8.8.8.8
          - 8.8.4.4

    port_forwarding:
      - source: 195.3.186.44
        from_port: &#39;80&#39;
        to_port: &#39;80&#39;
        destination: 10.1.0.11

instances:
  - name: web
    image: r3/ubuntu-1404
    cpus: 1
    memory: 1GB
    count: 1
    networks:
      name: web
      start_ip: 10.1.0.11
    provisioner:
      - exec:
        - &#39;sudo apt-get update&#39;
        - &#39;sudo apt-get install apache2 -y&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&#34;field-reference&#34;&gt;Field Reference&lt;/h2&gt;

&lt;h3 id=&#34;service-options&#34;&gt;Service Options&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;name: demo
datacenter: r3-jreid2
bootstrapping: salt
service_ip: 195.3.186.44
ernest_ip:
  - 31.210.240.161
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Service Options support the following fields:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;name&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the name of the service to build.&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field cannot be null or empty.&lt;/li&gt;
&lt;li&gt;The value of this field must be 50 characters maximum.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;datacenter&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the name of the datacenter where the service is built.&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field cannot be null or empty.&lt;/li&gt;
&lt;li&gt;The value of this field must 50 characters maximum.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;bootstrapping&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String [salt, none] that defines if you’re going to be able to execute commands on the servers&lt;/li&gt;
&lt;li&gt;This field is optional.&lt;/li&gt;
&lt;li&gt;This field defaults to none.&lt;/li&gt;
&lt;li&gt;The value of this is restricted to “salt” or “none”&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;service_ip&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the public ip of the router already created on vcloud&lt;/li&gt;
&lt;li&gt;This field is optional&lt;/li&gt;
&lt;li&gt;This field defaults to none.&lt;/li&gt;
&lt;li&gt;The value of this field is an IP, internally defined as &lt;a href=&#34;https://golang.org/pkg/net/#IP&#34; target=&#34;_blank&#34;&gt;https://golang.org/pkg/net/#IP&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;ernest_ip&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Array of IPs that defines the ernest instance public ip, so it will be allowed through the created service firewall rules.&lt;/li&gt;
&lt;li&gt;The value of this field is an IP, internally defined as &lt;a href=&#34;https://golang.org/pkg/net/#IP&#34; target=&#34;_blank&#34;&gt;https://golang.org/pkg/net/#IP&lt;/a&gt;&lt;br /&gt;&lt;/li&gt;
&lt;li&gt;This field is mandatory only if you’ve defined bootstrapping as “salt”&lt;/li&gt;
&lt;li&gt;This field defaults to an empty array.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;networking&#34;&gt;Networking&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;routers: 
  - name: demo
    rules:
    - name: in_out_any
      source: internal
      from_port: any
      destination: external
      to_port: any
      protocol: any
      action: allow

    - name: out_in_80
      source: any
      from_port: any
      destination: internal
      to_port: &#39;80&#39;
      protocol: tcp
      action: allow

    networks:
      - name: web
        subnet: 10.1.0.0/24
        dns:
          - 8.8.8.8
          - 8.8.4.4

    port_forwarding:
      - source: 195.3.186.44
        from_port: &#39;80&#39;
        to_port: &#39;80&#39;
        destination: 10.1.0.11
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Networking supports the following fields:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;name&lt;/strong&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the name of the service to build.&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field cannot be null or empty.&lt;/li&gt;
&lt;li&gt;This field must be unique by user &amp;amp; manifest.&lt;/li&gt;
&lt;li&gt;The value of this field can be 50 characters maximum.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;rules&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;A firewall rule controls traffic that is allowed to flow between both internal and external routers and networks.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;name&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the name of the rule.&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field can’t be null or empty.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;source&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String the source of the network where this firewall acts&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;Values can be: external | internal | any | named networks | CIDR&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;from_port&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Source port numbers&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;Values can be:  an string ( valid port number, 1 - 65535 ) or any&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;destination&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String the destination of the network where this firewall acts&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;Values can be:  external | internal | any | named networks | CIDR&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;to_port&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Destination port numbers&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;Values can be:  an string ( valid port number, 1 - 65535 ) or any&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;protocol&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String with the protocol we are firewalling&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;Values can be: tcp | udp | icmp | any | tcp &amp;amp; udp&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;networks&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;A network is a virtual network that attaches to a router (in vcloud, other providers will differ). This is what allows us to network/isolate VM’s together.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;name&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the name of the service to build.&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field cannot be null or empty.&lt;/li&gt;
&lt;li&gt;The value of this field must be 50 characters maximum.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;subnet&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the name of a network to add to this service.&lt;/li&gt;
&lt;li&gt;It must follow CIDR notation as described at: &lt;a href=&#34;https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing&#34; target=&#34;_blank&#34;&gt;https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field cannot be null or empty.&lt;/li&gt;
&lt;li&gt;This field must be unique for this user &amp;amp; all the networks on the manifest.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;dns&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Array of IPs to use as dns servers on this service&lt;/li&gt;
&lt;li&gt;It must follow CIDR notation as described at: &lt;a href=&#34;https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing&#34; target=&#34;_blank&#34;&gt;https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;This field is optional.&lt;/li&gt;
&lt;li&gt;This field can be empty and it will default to [&amp;laquo;8.8.8.8&amp;raquo;, &amp;laquo;8.8.4.4&amp;raquo;].&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;port_forwarding&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;A port forward is something that converts translates a request on a port from one IP to another on a different network. Only tcp port forwarding is supported.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;from_port&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Source port numbers&lt;/li&gt;
&lt;li&gt;Values can be:  an string ( valid port number, 1 - 65535 ) or any&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;destination&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String the destination of the IPv4 Address to translate to&lt;/li&gt;
&lt;li&gt;Values can be: IPv4&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;to_port&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Destination port numbers&lt;/li&gt;
&lt;li&gt;Values can be:  an string ( valid port number, 1 - 65535 ) or any&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;source&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the IP from the provider-specified sub-allocated list of IPs of the router.&lt;/li&gt;
&lt;li&gt;It must follow CIDR notation as described at: &lt;a href=&#34;https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing&#34; target=&#34;_blank&#34;&gt;https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;This field is optional.&lt;/li&gt;
&lt;li&gt;This field can be null or empty, in case a router is created by Ernest it will default to the created one, on the other hand this value will be used.&lt;/li&gt;
&lt;li&gt;This field must be unique for this user &amp;amp; all the networks on the manifest.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&#34;instances&#34;&gt;Instances&lt;/h3&gt;

&lt;pre&gt;&lt;code&gt;instances:
  - name: web
    image: r3/ubuntu-1404
    cpus: 1
    memory: 1GB
    count: 1
    networks:
      name: web
      start_ip: 10.1.0.11
    provisioner:
      - exec:
        - &#39;sudo apt-get update&#39;
        - &#39;sudo apt-get install apache2 -y&#39;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Instances support the following fields:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;name&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the name of the instance to build.&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field cannot be null or empty.&lt;/li&gt;
&lt;li&gt;This field must be unique by user &amp;amp; manifest.&lt;/li&gt;
&lt;li&gt;The value of this field must be 50 characters maximum.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;image&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the name of an image to install on the VM.&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field cannot be null or empty.&lt;/li&gt;
&lt;li&gt;This field is composed in two parts one for the “catalog” and another one for the “image” separated by a slash “/”&lt;/li&gt;
&lt;li&gt;Both “catalog” and “image” are strings and can’t be null.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;cpus&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Integer that defines how many CPUs will have the VM.&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field cannot be null or empty.&lt;/li&gt;
&lt;li&gt;This field must be greater or equal than 1&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;memory&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the name of a load balancer to add to this service.&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field cannot be null or empty.&lt;/li&gt;
&lt;li&gt;This field must follow the Binary Prefix format: &lt;a href=&#34;https://en.wikipedia.org/wiki/Binary_prefix#Computer_memory&#34; target=&#34;_blank&#34;&gt;https://en.wikipedia.org/wiki/Binary_prefix#Computer_memory&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;The possible binary prefixes are MB, GB, TB, PB, YB&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;disks:&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;A list of sizes of hard disks that belongs to the VM&lt;/li&gt;
&lt;li&gt;This field can be an empty list&lt;/li&gt;
&lt;li&gt;This field is a list of strings&lt;/li&gt;
&lt;li&gt;Each element of the string must follow the Binary Prefix format: &lt;a href=&#34;https://en.wikipedia.org/wiki/Binary_prefix#Hard_disk_drives&#34; target=&#34;_blank&#34;&gt;https://en.wikipedia.org/wiki/Binary_prefix#Hard_disk_drives&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;The possible binary prefixes are MB, GB, TB, PB, YB&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;count&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Integer that defines the number of VM to be created.&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field cannot be null or empty.&lt;/li&gt;
&lt;li&gt;This field must be greater or equal that 1&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;strong&gt;networks&lt;/strong&gt;
Networks is a map with two fields&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;strong&gt;name&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the name of a network to attach this instance.&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field cannot be null or empty.&lt;/li&gt;
&lt;li&gt;The value of this field should exist on the networks section previously specified.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;start_ip&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;String that defines the starting IP to allocate the VMs to be built.&lt;/li&gt;
&lt;li&gt;This field is mandatory.&lt;/li&gt;
&lt;li&gt;This field cannot be null or empty.&lt;/li&gt;
&lt;li&gt;This field must be a valid IP.&lt;/li&gt;
&lt;li&gt;This IP should belong to the network already defined on the instance.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;provisioner&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Array that contains provisioner types&lt;/li&gt;
&lt;li&gt;Each provisioner type will be run in the order they are specified in the document&lt;/li&gt;
&lt;li&gt;This field is optional&lt;/li&gt;
&lt;li&gt;This field can be empty&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;

&lt;li&gt;&lt;p&gt;&lt;strong&gt;exec&lt;/strong&gt;&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Array of strings, any command characters must be escaped with backslashes: (RFC7159, Section 7)&lt;/li&gt;
&lt;li&gt;Each command in the exec array is concatenated together and delimited by a semicolon.&lt;/li&gt;
&lt;li&gt;This field is optional&lt;/li&gt;
&lt;li&gt;If specified as a provisioner type, this array field must contain at least one element&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>